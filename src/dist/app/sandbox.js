(()=>{"use strict";function a(a){return Swal.fire({icon:"success",title:"Information",text:a,showConfirmButton:!1,timer:1500})}function t(a){return Swal.fire({text:a,icon:"error",showCancelButton:!1,confirmButton:!0})}function e(){return Swal.fire({backdrop:!0,position:"center",imageUrl:hostname+"src/bundle/icon/loading.gif",imageWidth:400,imageHeight:200,title:"Mohon Tunggu Sebentar",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1})}function o(a,t,o,s,n){e(),$.ajax({type:a,url:t,data:o,dataType:"json",success:function(a){swal.close(),$(s).html(a.respon),$(n).html(a.Total)}})}function s(a,t){$.ajax({type:"POST",url:hostname+"dataload/suminventoris",data:{tgl:a,store:t},dataType:"json",success:function(a){$(".totalsumchiper").text(a.respon)}})}function n(o,s,n,l){e(),$.ajax({type:o,url:s,data:n,dataType:"json",success:function(e){e.sukses?a(e.sukses).then((function(a){Swal.close()})):e.respon&&t(e.gagal).then((function(a){Swal.close()}))},error:function(a,e,o){a.status&&500==a.status?t("sorry we have temporary server issues.").then((function(a){Swal.close()})):a.status&&404==a.status?t("URL 404").then((function(a){Swal.close()})):t("sorry we have temporary server issues.").then((function(a){Swal.close()}))}}).done((function(a){Swal.close();var t=$("<a>");t.attr("href",a.file),$("body").append(t),t.attr("download",l+".xlsx"),t[0].click(),t.remove()}))}$(document).ready((function(){!function(){$("img").attr("loading","lazy"),$(".clock").datetimepicker({lang:"en",timepicker:!1,format:"Y-m-d",formatDate:"Y-m-d",scrollMonth:!1});var l=localStorage.getItem("tanggal");null==l&&(location.href=hostname+"logout"),$(".tgl").val(l),$(".tglg").text(l),$(".select1").select2(),$(window).width()>992&&$(window).scroll((function(){$(this).scrollTop()>40?($("#navbar_top").addClass("fixed-top"),$("body").css("padding-top",$(".navbar").outerHeight()+"px")):($("#navbar_top").removeClass("fixed-top"),$("body").css("padding-top","0"))})),$(document).on("click",".btnupload",(function(o){o.preventDefault(),e();var n=$(this).data("konteks"),l=$("input[name=filesname]")[0].files[0],r="",c="",d=localStorage.getItem("tanggal"),i=localStorage.getItem("store");switch(n){case"x20":(r=new FormData).append("namafile",l),r.append("tanggal",d),r.append("store",i),c=hostname+"dataload/uploadfilex20";break;case"chiperlab":var u=$("select[name=floor]").val();(r=new FormData).append("namafile",l),r.append("tanggal",d),r.append("store",i),r.append("namaflor",u),c=hostname+"dataload/uploadchiperlab"}$.ajax({type:"POST",url:c,data:r,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(e){e.sukses?a(e.sukses).then((function(){$.ajax({type:"POST",url:hostname+"dataload/hapusfile",data:r,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(a){s(d,i),location.reload()}})})):e.gagal&&t(e.gagal).then((function(){$.ajax({type:"POST",url:hostname+"dataload/hapusfile",data:r,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(a){location.reload()}})}))},error:function(a,e,o){a.status&&a.status,t("Periksa Kembali isi file anda,pastikan tidak ada spesial character").then((function(){Swal.close(),$.ajax({type:"POST",url:hostname+"dataload/hapusfile",data:r,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(a){location.reload()}})}))}})})),$(document).on("click",".btndownload",(function(t){t.preventDefault();var e=$(this).data("files"),o="",s="";switch(e){case"x20":o=hostname+"dataload/downloadsampel/",s="sampel-x20.xlsx";break;case"store":o=hostname+"dataload/downloadsampel/",s="MASTERSTORE.xls"}$.ajax({type:"POST",url:o,data:{request:"download",download:s},dataType:"json",success:function(t){a(t.respon).then((function(){window.location.href=hostname+"src/bundle/sampel/"+s,swal.close()}))}})}));var r="",c="",d="",i="",u="",p=localStorage.getItem("tanggal"),h=localStorage.getItem("store");switch(segment){case"laporanaudit":r="POST",c=hostname+"dataload/datalaporanaudit",o(r,c,d={tgl:p,store:h},i=".tablelaporanaudit tbody",u=".tablelaporanaudit tfoot");break;case"diffx20":r="POST",c=hostname+"dataload/datalaporandiffrent",o(r,c,d={tgl:p,store:h},i=".tableauditdiff tbody",u=".tableauditdiff tfoot");break;case"laporanx20":r="POST",c=hostname+"dataload/datax20",o(r,c,d={tgl:p,store:h},i=".tablex20 tbody",u=".tablex20 tfoot");break;case"rekapchiperlab":r="POST",c=hostname+"dataload/laporanchiperlab",o(r,c,d={tgl:p,store:h},i=".tablerekapchiperlab tbody",u="");break;case"laporandatauser":r="POST",c=hostname+"dataload/laporanuser",o(r,c,d={tgl:p,store:h},i=".tablalaporanuser tbody",u="");break;case"laporandatahistoris":r="POST",c=hostname+"dataload/laporanhistoris",o(r,c,d={tgl:p,store:h},i=".tballaporanhistoris tbody",u="");break;case"chiperlab":r="POST",c=hostname+"dataload/datadummychiperlab",d={tgl:p,store:h},i=".tabledummy tbody",u=".tabledummy tfoot",s(p,h),o(r,c,d,i,u)}"closeaudit"===segment1&&(navigator.onLine?$(".kirmdataonline").removeClass("d-none"):$(".kirmdataonline").addClass("d-none")),$(document).on("click",".btndownloadlaporan",(function(a){a.preventDefault();var t=$('input[type="search"]').val(),e=$(".description").text();switch(segment){case"diffx20":r="POST",c=hostname+"baseexcel/downloaddiffrent",n(r,c,d={tgl:p,store:h,search:t,title:e},e);break;case"laporanaudit":r="POST",c=hostname+"baseexcel/downloadlaporanaudit",n(r,c,d={tgl:p,store:h,search:t,title:e},e);break;case"rekapchiperlab":r="POST",c=hostname+"baseexcel/rekapchiperlab",n(r,c,d={tgl:p,store:h,search:t,title:e},e);break;case"laporandatahistoris":r="POST",c=hostname+"baseexcel/rekaphistoris",n(r,c,d={tgl:p,store:h,search:t,title:e},e)}})),$(document).on("search",".Search",(function(a){a.preventDefault();var t=$('input[type="search"]').val(),e=localStorage.getItem("tanggal"),s=localStorage.getItem("store");switch(segment){case"laporanaudit":o("POST",hostname+"dataload/datalaporanaudit",{tgl:e,store:s,search:t},".tablelaporanaudit tbody",".tablelaporanaudit tfoot");break;case"diffx20":o("POST",hostname+"dataload/datalaporandiffrent",{tgl:e,store:s,search:t},".tableauditdiff tbody",".tableauditdiff tfoot");break;case"laporanx20":o("POST",hostname+"dataload/datax20",{tgl:e,store:s,search:t},".tablex20 tbody",".tablex20 tfoot");break;case"rekapchiperlab":o("POST",hostname+"dataload/laporanchiperlab",{tgl:e,store:s,search:t},".tablerekapchiperlab tbody","");break;case"laporandatauser":o("POST",hostname+"dataload/laporanuser",{tgl:e,store:s,search:t},".tablalaporanuser tbody","");break;case"laporandatahistoris":o("POST",hostname+"dataload/laporanhistoris",{tgl:e,store:s,search:t},".tballaporanhistoris tbody","")}})),$(document).on("keyup",'input[type="search"]',(function(a){var t=$('input[type="search"]').val(),e=localStorage.getItem("tanggal"),s=localStorage.getItem("store");switch(segment){case"laporanaudit":o("POST",hostname+"dataload/datalaporanaudit",{tgl:e,store:s,search:t},".tablelaporanaudit tbody",".tablelaporanaudit tfoot");break;case"diffx20":o("POST",hostname+"dataload/datalaporandiffrent",{tgl:e,store:s,search:t},".tableauditdiff tbody",".tableauditdiff tfoot");break;case"laporanx20":o("POST",hostname+"dataload/datax20",{tgl:e,store:s,search:t},".tablex20 tbody",".tablex20 tfoot");break;case"rekapchiperlab":o("POST",hostname+"dataload/laporanchiperlab",{tgl:e,store:s,search:t},".tablerekapchiperlab tbody","");break;case"laporandatauser":o("POST",hostname+"dataload/laporanuser",{tgl:e,store:s,search:t},".tablalaporanuser tbody","");break;case"laporandatahistoris":o("POST",hostname+"dataload/laporanhistoris",{tgl:e,store:s,search:t},".tballaporanhistoris tbody","")}})),$(document).on("click",".closeaudit",(function(o){o.preventDefault();var s=localStorage.getItem("tanggal"),n=localStorage.getItem("store"),l=$("input[name=staffstore]").val();""!=l?(e(),$.ajax({type:"POST",url:hostname+"dataload/closeaudit",data:{tgl:s,store:n,staf:l},dataType:"json",success:function(t){t.sukses?a(t).then((function(){location.reload()})):t.gagal&&a(t.gagal).then((function(){location.reload()}))},error:function(a,e,o){a.status&&a.status,t("Data Error").then((function(){Swal.close()}))}})):t("Nama Staff Tidak Boleh Kosong").then((function(){Swal.close()}))})),$.ajax({type:"POST",url:hostname+"dataload/cekstatus",data:{tgl:localStorage.getItem("tanggal"),store:localStorage.getItem("store")},dataType:"json",success:function(a){$(".statuss").text(a.respon),$(".pengaudit").text(a.pengaudit)}}),$(document).on("click",".kirmdataonline",(function(o){o.preventDefault();var s=localStorage.getItem("tanggal"),n=localStorage.getItem("store");e(),$.ajax({type:"POST",url:hostname+"dataload/postserveronline",data:{store:n,tanggal:s},dataType:"json",success:function(e){"200"==e.respon?a(e.messages).then((function(a){$.ajax({type:"POST",url:hostname+"dataload/hapusfile2",data:formdata,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(a){Swal.close()}})})):"404"==e.respon&&t(e.messages).then((function(a){Swal.close()}))},error:function(a,e,o){a.status&&500==a.status?t("sorry we have temporary server issues.").then((function(a){Swal.close()})):a.status&&404==a.status?t("URL 404").then((function(a){Swal.close()})):t("Error data").then((function(a){Swal.close()}))}})}))}()}))})();